<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Negocio de las Golosinas - An√°lisis de Inversi√≥n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .slide {
            background: linear-gradient(145deg, #1e2746, #252a47);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            opacity: 0;
            transform: translateY(50px);
            animation: slideUp 0.8s ease-out forwards;
        }

        .slide:nth-child(1) { animation-delay: 0.2s; }
        .slide:nth-child(2) { animation-delay: 0.4s; }
        .slide:nth-child(3) { animation-delay: 0.6s; }
        .slide:nth-child(4) { animation-delay: 0.8s; }
        .slide:nth-child(5) { animation-delay: 1.0s; }
        .slide:nth-child(6) { animation-delay: 1.2s; }
        .slide:nth-child(7) { animation-delay: 1.4s; }
        .slide:nth-child(8) { animation-delay: 1.6s; }
        .slide:nth-child(9) { animation-delay: 1.8s; }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .title-slide {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, #0f1419 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .title-slide h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .title-slide p {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .subtitle {
            font-size: 1rem;
            color: #64b5f6;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .case-info {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
        }

        .question-slide h2 {
            color: #f1f5f9;
            font-size: 2.2rem;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #64748b;
            display: flex;
            align-items: center;
        }

        .question-number {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            margin-right: 20px;
            box-shadow: 0 5px 15px rgba(100, 116, 139, 0.4);
        }

        .content-section {
            margin: 30px 0;
        }

        .content-section h3 {
            color: #cbd5e1;
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-left: 20px;
            border-left: 4px solid #64748b;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
        }

        .highlight-box {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-left: 5px solid #64748b;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            color: #e2e8f0;
        }

        .critical-box {
            background: linear-gradient(135deg, #2d1b1b, #3d2626);
            border-left: 5px solid #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.2);
            color: #f8fafc;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .data-card {
            background: linear-gradient(135deg, #334155, #475569);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }

        .data-card:hover {
            transform: translateY(-5px);
        }

        .data-card h4 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .data-card .value {
            font-size: 2.5rem;
            font-weight: bold;
            display: block;
            margin: 15px 0;
        }

        .data-card .negative {
            color: #ff6b6b;
        }

        .data-card .positive {
            color: #51cf66;
        }

        .revenue-timeline {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            color: #e2e8f0;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #475569, #64748b);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            color: #f1f5f9;
        }

        .timeline-year {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            font-weight: bold;
            margin-right: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .timeline-content {
            flex: 1;
        }

        .financial-summary {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .kpi-item {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .kpi-value {
            font-size: 2rem;
            font-weight: bold;
            display: block;
            margin: 10px 0;
        }

        .cost-breakdown {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            color: #e2e8f0;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .cost-item:last-child {
            border-bottom: none;
            font-weight: bold;
            border-top: 2px solid #64748b;
            padding-top: 15px;
        }

        .sensitivity-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            color: #e2e8f0;
        }

        .sensitivity-table th,
        .sensitivity-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sensitivity-table th {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
            font-weight: 600;
        }

        .recommendations {
            background: linear-gradient(135deg, #166534, #15803d);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #f0fdf4;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(34, 197, 94, 0.2);
        }

        .recommendations h3 {
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .recommendations ul {
            list-style: none;
            padding: 0;
        }

        .recommendations li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .recommendations li:before {
            content: "üí°";
            position: absolute;
            left: 0;
            top: 10px;
        }

        .navigation {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            z-index: 1000;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background: white;
            transform: scale(1.3);
        }

        @media (max-width: 768px) {
            .title-slide h1 {
                font-size: 2.5rem;
            }
            
            .slide {
                padding: 25px;
                margin: 20px 0;
            }
            
            .question-slide h2 {
                font-size: 1.8rem;
                flex-direction: column;
                text-align: center;
            }
            
            .question-number {
                margin: 0 0 15px 0;
            }
            
            .navigation {
                display: none;
            }

            .data-grid {
                grid-template-columns: 1fr;
            }
        }

        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .chart-container-advanced {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }

        .chart-title {
            color: #f1f5f9;
            font-size: 1.8rem;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 600;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .chart-grid {
            position: absolute;
            top: 20px;
            left: 50px;
            right: 20px;
            bottom: 40px;
            background-image: 
                linear-gradient(to right, rgba(255,255,255,0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 80px 60px;
        }

        .chart-bars {
            position: absolute;
            bottom: 40px;
            left: 50px;
            right: 20px;
            height: 300px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            gap: 8px;
        }

        .chart-bar {
            flex: 1;
            position: relative;
            min-height: 10px;
            border-radius: 6px 6px 0 0;
            transition: all 0.8s ease;
            cursor: pointer;
        }

        .chart-bar.positive {
            background: linear-gradient(to top, #10b981, #34d399);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .chart-bar.negative {
            background: linear-gradient(to top, #ef4444, #f87171);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        .chart-bar:hover {
            transform: scaleY(1.05);
            filter: brightness(1.2);
        }

        .chart-bar-label {
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            color: #94a3b8;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .chart-value {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 0.75rem;
            font-weight: 600;
            background: rgba(0,0,0,0.7);
            padding: 4px 8px;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .chart-bar:hover .chart-value {
            opacity: 1;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #cbd5e1;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-positive {
            background: linear-gradient(to right, #10b981, #34d399);
        }

        .legend-negative {
            background: linear-gradient(to right, #ef4444, #f87171);
        }

        .chart-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .metric-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .metric-label {
            color: #94a3b8;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .metric-value {
            color: #f1f5f9;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .negative {
            color: #fca5a5 !important;
        }

        .positive {
            color: #86efac !important;
        }

        .kpi-value.negative {
            color: #fca5a5 !important;
        }

        .sensitivity-table .negative {
            color: #fca5a5 !important;
            font-weight: 600;
        }

        /* Indicador de Progreso */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(0,0,0,0.2);
            z-index: 1001;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #64748b, #94a3b8, #cbd5e1);
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(148, 163, 184, 0.5);
        }

        /* Breadcrumbs */
        .breadcrumbs {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(30, 41, 59, 0.9);
            padding: 8px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            z-index: 1000;
        }

        .breadcrumb-item {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .breadcrumb-item.active {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
            transform: scale(1.05);
        }

        .breadcrumb-item:hover {
            background: rgba(100, 116, 139, 0.3);
            color: #e2e8f0;
        }

        /* Gr√°fico Circular (Donut Chart) */
        .donut-chart-container {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .donut-chart {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }

        .donut-segment {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .donut-segment:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        .donut-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #f1f5f9;
        }

        .donut-total {
            font-size: 1.8rem;
            font-weight: bold;
            color: #e2e8f0;
        }

        .donut-label {
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .donut-legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .donut-legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .donut-legend-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .donut-legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        /* Gr√°fico de Barras Apiladas */
        .stacked-chart-container {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .stacked-chart {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }

        .stacked-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 350px;
            gap: 10px;
            padding: 0 20px;
        }

        .stacked-bar {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            width: 100%;
            max-width: 60px;
            position: relative;
            cursor: pointer;
        }

        .stacked-segment {
            transition: all 0.3s ease;
            margin: 1px 0;
        }

        .stacked-segment:hover {
            filter: brightness(1.2);
            transform: scaleX(1.1);
        }

        .stacked-year-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            color: #94a3b8;
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Timeline Interactiva */
        .interactive-timeline {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .timeline-track {
            position: relative;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin: 40px 0;
        }

        .timeline-progress {
            height: 100%;
            background: linear-gradient(90deg, #64748b, #94a3b8);
            border-radius: 2px;
            width: 0%;
            transition: width 2s ease-out;
        }

        .timeline-markers {
            position: relative;
            display: flex;
            justify-content: space-between;
            margin-top: -20px;
        }

        .timeline-marker {
            position: relative;
            width: 16px;
            height: 16px;
            background: #475569;
            border: 3px solid #1e293b;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-marker.active {
            background: #94a3b8;
            transform: scale(1.3);
            box-shadow: 0 0 15px rgba(148, 163, 184, 0.5);
        }

        .timeline-marker:hover {
            background: #64748b;
            transform: scale(1.2);
        }

        .timeline-marker-info {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 41, 59, 0.95);
            padding: 8px 12px;
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .timeline-marker:hover .timeline-marker-info {
            opacity: 1;
        }

        /* Modo Pantalla Completa */
        .fullscreen-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #64748b, #475569);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .fullscreen-btn:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, #94a3b8, #64748b);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }

        /* Animaciones Mejoradas */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .animate-slide-left {
            animation: slideInLeft 0.8s ease-out;
        }

        .animate-slide-right {
            animation: slideInRight 0.8s ease-out;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        .animate-bounce {
            animation: bounce 1s;
        }

        /* Efectos Hover Mejorados */
        .enhanced-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .enhanced-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        /* Iconos Animados */
        .animated-icon {
            display: inline-block;
            transition: transform 0.3s ease;
        }

        .slide:hover .animated-icon {
            transform: rotate(360deg) scale(1.1);
        }

        /* Transiciones Suaves */
        * {
            scroll-behavior: smooth;
        }

        .slide {
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Responsive para nuevos elementos */
        @media (max-width: 768px) {
            .breadcrumbs {
                display: none;
            }
            
            .donut-chart {
                width: 250px;
                height: 250px;
            }
            
            .stacked-bars {
                gap: 5px;
                padding: 0 10px;
            }
            
            .fullscreen-btn {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <!-- Indicador de Progreso -->
    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <!-- Breadcrumbs -->
    <div class="breadcrumbs" id="breadcrumbs">
        <div class="breadcrumb-item active" onclick="scrollToSlide(0)">Inicio</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(1)">Flujos</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(2)">Elementos</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(3)">Ingresos</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(4)">Costos</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(5)">CAPEX</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(6)">Financiamiento</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(7)">Tasas</div>
        <div class="breadcrumb-item" onclick="scrollToSlide(8)">KPIs</div>
    </div>

    <!-- Bot√≥n Pantalla Completa -->
    <button class="fullscreen-btn" onclick="toggleFullscreen()" title="Pantalla Completa">
        <span id="fullscreen-icon">‚õ∂</span>
    </button>

    <div class="navigation">
        <div class="nav-dot active" onclick="scrollToSlide(0)"></div>
        <div class="nav-dot" onclick="scrollToSlide(1)"></div>
        <div class="nav-dot" onclick="scrollToSlide(2)"></div>
        <div class="nav-dot" onclick="scrollToSlide(3)"></div>
        <div class="nav-dot" onclick="scrollToSlide(4)"></div>
        <div class="nav-dot" onclick="scrollToSlide(5)"></div>
        <div class="nav-dot" onclick="scrollToSlide(6)"></div>
        <div class="nav-dot" onclick="scrollToSlide(7)"></div>
        <div class="nav-dot" onclick="scrollToSlide(8)"></div>
    </div>

    <div class="container">
        <!-- Slide 1: Portada -->
        <div class="slide title-slide" id="slide-0">
            <div class="subtitle">Caso de Estudio</div>
            <h1>El Negocio de las Golosinas</h1>
            <p>An√°lisis de Viabilidad Financiera</p>
            <div class="case-info">
                <h3 style="margin-bottom: 15px;">üéØ Preguntas Fundamentales</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; text-align: left;">
                    <div>‚Ä¢ Importancia de construir bien los flujos de caja</div>
                    <div>‚Ä¢ Elementos que deben incluirse</div>
                    <div>‚Ä¢ Tasas de descuento utilizadas</div>
                </div>
            </div>
            <div style="margin-top: 40px; padding: 25px; background: rgba(255,255,255,0.1); border-radius: 15px; backdrop-filter: blur(10px);">
                <div style="font-size: 1.3rem; font-weight: 600; margin-bottom: 15px; color: #e2e8f0;">
                    üë• Integrantes
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 20px; font-size: 1.1rem;">
                    <div>‚Ä¢ Camila Quilodr√°n</div>
                    <div>‚Ä¢ Sergio Caripan</div>
                    <div>‚Ä¢ Leandro Navarrete</div>
                    <div>‚Ä¢ Diego Bravo</div>
                </div>
                <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px;">
                    <div style="font-size: 1.1rem; font-weight: 500; margin-bottom: 8px;">üìÖ Junio 2025</div>
                    <div style="font-size: 1rem; margin-bottom: 5px;">üè´ Duoc UC</div>
                    <div style="font-size: 0.95rem; margin-bottom: 3px;">üéì Ingenier√≠a en Adm de Empresas Menci√≥n Finanzas</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">üìö Formulaci√≥n y Evaluaci√≥n de Proyectos</div>
                </div>
            </div>
        </div>

        <!-- Slide 2: Importancia de los Flujos -->
        <div class="slide question-slide" id="slide-1">
            <h2>
                <div class="question-number">1</div>
                Importancia de la Construcci√≥n de Flujos
            </h2>
            
            <div class="content-section">
                <h3><span class="animated-icon">üéØ</span> Caso Real: Impacto de la Precisi√≥n Temporal</h3>
                <p>Para ilustrar la relevancia de un flujo de caja preciso, analicemos el CAPEX inicial de nuestro proyecto:</p>
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <h4>CAPEX Inicial</h4>
                    <span class="value">$210.000</span>
                    <p>Inversi√≥n A√±o 0</p>
                </div>
                <div class="data-card">
                    <h4>Tasa de Descuento</h4>
                    <span class="value">7.5%</span>
                    <p>Costo de Oportunidad</p>
                </div>
                <div class="data-card">
                    <h4>VAN Actual</h4>
                    <span class="value negative">-$164.922</span>
                    <p>Con timing correcto</p>
                </div>
            </div>

            <div class="critical-box">
                <strong>‚ö†Ô∏è Impacto del Error Temporal:</strong>
                <p>Si por error desplaz√°ramos el CAPEX del A√±o 0 al A√±o 1, el VAN pasar√≠a de <strong>-$164.922</strong> a <strong>-$144.000</strong>, un desfase de casi <strong>$20.000</strong> que distorsionar√≠a completamente la decisi√≥n de inversi√≥n.</p>
            </div>

            <div class="content-section">
                <h3>üí± Complejidad Adicional: Multiples Monedas</h3>
                <div class="cost-breakdown">
                    <div class="cost-item">
                        <span><strong>Exportaci√≥n Colombia:</strong></span>
                        <span>COP 60,000 por caja</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Exportaci√≥n Ecuador:</strong></span>
                        <span>USD 40 por caja</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Tipo de Cambio Inicial:</strong></span>
                        <span>2,700 COP/USD</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Devaluaci√≥n Anual:</strong></span>
                        <span>0.75%</span>
                    </div>
                </div>
                <p>Cualquier imprecisi√≥n al convertir estos ingresos generar√≠a errores acumulados de decenas de miles de d√≥lares en los flujos futuros.</p>
            </div>
        </div>

        <!-- Slide 3: Elementos del Flujo de Caja -->
        <div class="slide question-slide" id="slide-2">
            <h2>
                <div class="question-number">2</div>
                Elementos del Flujo de Caja
            </h2>
            
            <div class="content-section">
                <h3>üèóÔ∏è Estructura Integrada del Proyecto</h3>
                <p>Nuestro flujo de caja integra <strong>10 componentes principales</strong> organizados en un diagrama de bloques coherente que refleja la realidad operativa del negocio.</p>
            </div>

            <div class="highlight-box">
                <strong>üìã Componentes del Flujo:</strong>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div>‚Ä¢ Ingresos por Ventas</div>
                    <div>‚Ä¢ Costos Variables</div>
                    <div>‚Ä¢ Costos Fijos Operativos</div>
                    <div>‚Ä¢ Depreciaci√≥n</div>
                    <div>‚Ä¢ Capital de Trabajo</div>
                    <div>‚Ä¢ CAPEX</div>
                    <div>‚Ä¢ Financiamiento</div>
                    <div>‚Ä¢ Log√≠stica Export</div>
                    <div>‚Ä¢ Mantenimiento</div>
                    <div>‚Ä¢ Impuestos</div>
                </div>
            </div>

            <!-- Gr√°fico de Flujo de Caja -->
            <div class="chart-container-advanced">
                <h3 class="chart-title">üìä Evoluci√≥n del Flujo de Caja Libre (USD Miles)</h3>
                <div class="chart-wrapper">
                    <div class="chart-grid"></div>
                    <div class="chart-bars" id="cash-flow-chart">
                        <!-- Las barras se generar√°n con JavaScript -->
                    </div>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color legend-positive"></div>
                        <span>Flujo Positivo</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-negative"></div>
                        <span>Flujo Negativo</span>
                    </div>
                </div>
                <div class="chart-metrics">
                    <div class="metric-item">
                        <div class="metric-label">VAN Total</div>
                        <div class="metric-value negative">-$164.922</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-label">Flujo Acumulado Final</div>
                        <div class="metric-value positive">$4.501</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-label">Mejor A√±o</div>
                        <div class="metric-value">A√±o 10: $135.183</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-label">Peor A√±o</div>
                        <div class="metric-value">A√±o 0: -$200.000</div>
                    </div>
                </div>
            </div>

            <!-- Gr√°fico Circular CAPEX -->
            <div class="donut-chart-container">
                <h3 class="chart-title">ü•ß Distribuci√≥n del CAPEX Total</h3>
                <div class="donut-chart" id="capex-donut">
                    <!-- El gr√°fico se generar√° con JavaScript -->
                </div>
                <div class="donut-legend" id="capex-legend">
                    <!-- La leyenda se generar√° con JavaScript -->
                </div>
            </div>
        </div>

        <!-- Slide 4: Evoluci√≥n de Ingresos -->
        <div class="slide question-slide" id="slide-3">
            <h2>
                <div class="question-number">3</div>
                Ingresos y Evoluci√≥n del Negocio
            </h2>
            
            <div class="content-section">
                <h3>üìà Trayectoria de Crecimiento</h3>
                <p>La evoluci√≥n de ingresos muestra el crecimiento gradual del negocio con hitos estrat√©gicos clave:</p>
            </div>

            <div class="revenue-timeline">
                <div class="timeline-item">
                    <div class="timeline-year">A√±o 1</div>
                    <div class="timeline-content">
                        <strong>USD 145.100</strong> - Ventas mayoristas + exportaci√≥n de excedentes
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">A√±o 4</div>
                    <div class="timeline-content">
                        <strong>USD 339.888</strong> - Apertura tienda principal (24.000 paquetes √ó $3.32)
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">A√±o 10</div>
                    <div class="timeline-content">
                        <strong>USD 552.232</strong> - Dos tiendas + exportaciones consolidadas
                    </div>
                </div>
            </div>

            <div class="data-grid">
                <div class="data-card">
                    <h4>Crecimiento Wholesale</h4>
                    <span class="value">0.9%</span>
                    <p>Anual de precios</p>
                </div>
                <div class="data-card">
                    <h4>Crecimiento Retail</h4>
                    <span class="value">1.2%</span>
                    <p>Anual de precios</p>
                </div>
                <div class="data-card">
                    <h4>Participaci√≥n Ecuador</h4>
                    <span class="value">60% ‚Üí 55.5%</span>
                    <p>Evoluci√≥n de mercado</p>
                </div>
            </div>
        </div>

        <!-- Slide 5: Estructura de Costos -->
        <div class="slide question-slide" id="slide-4">
            <h2>
                <div class="question-number">4</div>
                Estructura de Costos Variables y Fijos
            </h2>
            
            <div class="content-section">
                <h3>üí∞ Costos Variables</h3>
                <div class="cost-breakdown">
                    <div class="cost-item">
                        <span><strong>Materia Prima + Empaque:</strong></span>
                        <span>$0.72/paquete (+0.9% anual)</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>A√±o 1:</strong></span>
                        <span>$88.631</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>A√±o 10:</strong></span>
                        <span>$96.074</span>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h3>üöö Log√≠stica de Exportaci√≥n</h3>
                <div class="data-grid">
                    <div class="data-card">
                        <h4>Colombia (A√±o 4)</h4>
                        <span class="value">$18.472</span>
                        <p>COP 60.000/caja</p>
                    </div>
                    <div class="data-card">
                        <h4>Colombia (A√±o 6)</h4>
                        <span class="value">$12.574</span>
                        <p>Efecto devaluaci√≥n</p>
                    </div>
                    <div class="data-card">
                        <h4>Ecuador</h4>
                        <span class="value">$40</span>
                        <p>Por caja estable</p>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h3>üè≠ Costos Fijos Anuales</h3>
                <div class="cost-breakdown">
                    <div class="cost-item">
                        <span><strong>Planta (todos los a√±os):</strong></span>
                        <span>$86.800</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Tienda Principal (desde A√±o 4):</strong></span>
                        <span>$68.800</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Sucursal (desde A√±o 6):</strong></span>
                        <span>$66.800</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Mantenimiento Maquinaria:</strong></span>
                        <span>$5.000</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>CCTV:</strong></span>
                        <span>$500</span>
                    </div>
                </div>
            </div>

            <!-- Gr√°fico de Barras Apiladas -->
            <div class="stacked-chart-container">
                <h3 class="chart-title">üìä Evoluci√≥n de Estructura de Costos por A√±o</h3>
                <div class="stacked-chart">
                    <div class="stacked-bars" id="costs-stacked-chart">
                        <!-- Las barras se generar√°n con JavaScript -->
                    </div>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ef4444;"></div>
                        <span>Costos Variables</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f97316;"></div>
                        <span>Importaciones</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #eab308;"></div>
                        <span>Log√≠stica</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #22c55e;"></div>
                        <span>Costos Fijos</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3b82f6;"></div>
                        <span>Bad Debt</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 6: Depreciaci√≥n, WC y CAPEX -->
        <div class="slide question-slide" id="slide-5">
            <h2>
                <div class="question-number">5</div>
                Depreciaci√≥n, Capital de Trabajo y CAPEX
            </h2>
            
            <div class="content-section">
                <h3>üìâ Depreciaci√≥n L√≠nea Recta</h3>
                <div class="data-grid">
                    <div class="data-card">
                        <h4>A√±os 1-5</h4>
                        <span class="value">$36.332</span>
                        <p>M√°quina + Empaquetadora</p>
                    </div>
                    <div class="data-card">
                        <h4>Desde A√±o 3</h4>
                        <span class="value">+$9.164</span>
                        <p>Tienda Principal</p>
                    </div>
                    <div class="data-card">
                        <h4>Desde A√±o 6</h4>
                        <span class="value">+$4.582</span>
                        <p>Sucursal</p>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h3>üíº Capital de Trabajo</h3>
                <div class="highlight-box">
                    <strong>C√°lculo: 6% de ventas netas sin IVA</strong>
                    <br><br>
                    <strong>Ajustes por:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>Cuentas por cobrar - Castigo 1.5% retail, 5% export</li>
                        <li>Cuentas por pagar - 25% importaciones a un a√±o</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h3>üèóÔ∏è Inversiones CAPEX</h3>
                <div class="data-grid">
                    <div class="data-card">
                        <h4>A√±o 0</h4>
                        <span class="value">$210.000</span>
                        <p>Inversi√≥n inicial</p>
                    </div>
                    <div class="data-card">
                        <h4>A√±o 3</h4>
                        <span class="value">$80.105</span>
                        <p>Local + Mobiliario</p>
                    </div>
                    <div class="data-card">
                        <h4>A√±o 5</h4>
                        <span class="value">$30.105</span>
                        <p>Mobiliario Sucursal</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 7: Financiamiento -->
        <div class="slide question-slide" id="slide-6">
            <h2>
                <div class="question-number">6</div>
                Estructura de Financiamiento
            </h2>
            
            <div class="content-section">
                <h3>üí≥ Pr√©stamos MOITOI</h3>
                <p>Para financiar parte de la inversi√≥n se contratan dos pr√©stamos estrat√©gicos:</p>
            </div>

            <div class="data-grid">
                                    <div class="data-card">
                        <h4>Pr√©stamo 1 - A√±o 0</h4>
                        <span class="value">GBP 10.000</span>
                        <p>‚âà USD 10.000</p>
                    </div>
                    <div class="data-card">
                        <h4>Pr√©stamo 2 - A√±o 3</h4>
                        <span class="value">GBP 30.000</span>
                        <p>‚âà USD 30.000</p>
                    </div>
                <div class="data-card">
                    <h4>Tasa de Inter√©s</h4>
                    <span class="value">19%</span>
                    <p>Anual ambos pr√©stamos</p>
                </div>
            </div>

            <div class="highlight-box">
                <strong>üìã Condiciones de los Pr√©stamos:</strong>
                <ul style="margin-top: 15px; padding-left: 20px;">
                    <li><strong>Per√≠odo de Gracia:</strong> 1 a√±o para ambos pr√©stamos</li>
                    <li><strong>Amortizaci√≥n:</strong> 4 cuotas fijas despu√©s del a√±o de gracia</li>
                    <li><strong>Registro:</strong> Intereses y amortizaciones en bloque financiero independiente</li>
                    <li><strong>Moneda:</strong> Libras esterlinas con conversi√≥n a USD para an√°lisis</li>
                </ul>
            </div>

            <div class="financial-summary">
                <h3>üí∞ Impacto Financiero</h3>
                <p>Las salidas por intereses y amortizaciones se registran separadamente del flujo operativo, permitiendo una evaluaci√≥n clara del impacto del apalancamiento en la rentabilidad del proyecto.</p>
            </div>

            <!-- Timeline Interactiva -->
            <div class="interactive-timeline">
                <h3 class="chart-title">üìÖ Timeline del Proyecto</h3>
                <div class="timeline-track">
                    <div class="timeline-progress" id="timeline-progress"></div>
                </div>
                <div class="timeline-markers" id="timeline-markers">
                    <!-- Los marcadores se generar√°n con JavaScript -->
                </div>
            </div>
        </div>

        <!-- Slide 8: Tasas de Descuento -->
        <div class="slide question-slide" id="slide-7">
            <h2>
                <div class="question-number">7</div>
                Tasas de Descuento y An√°lisis de Sensibilidad
            </h2>
            
            <div class="content-section">
                <h3>üìä Costo de Oportunidad del Capital (COK)</h3>
                <div class="data-card" style="margin: 20px 0;">
                    <h4>COK Econ√≥mico</h4>
                    <span class="value">7.5%</span>
                    <p>Tasa base del proyecto</p>
                </div>
            </div>

            <div class="highlight-box">
                <strong>üßÆ C√°lculo del COK:</strong>
                <div class="cost-breakdown" style="margin-top: 15px;">
                    <div class="cost-item">
                        <span><strong>Tasa Libre de Riesgo (Rf):</strong></span>
                        <span>4.0%</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Beta (Œ≤):</strong></span>
                        <span>0.85</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Prima de Riesgo de Mercado (ERP):</strong></span>
                        <span>4.2%</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>Spread Adicional:</strong></span>
                        <span>0.5%</span>
                    </div>
                    <div class="cost-item">
                        <span><strong>COK = Rf + Œ≤ √ó ERP + Spread:</strong></span>
                        <span><strong>7.5%</strong></span>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <h3>üîç An√°lisis de Sensibilidad</h3>
                <table class="sensitivity-table">
                    <thead>
                        <tr>
                            <th>Tasa de Descuento</th>
                            <th>VAN (USD)</th>
                            <th>Variaci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>5.0%</td>
                            <td class="negative">-$122.640</td>
                            <td>Mejor escenario</td>
                        </tr>
                        <tr style="background-color: rgba(100, 116, 139, 0.2);">
                            <td><strong>7.5%</strong></td>
                            <td class="negative"><strong>-$164.922</strong></td>
                            <td><strong>Base</strong></td>
                        </tr>
                        <tr>
                            <td>10.0%</td>
                            <td class="negative">-$197.354</td>
                            <td>Escenario conservador</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="critical-box">
                <strong>‚ö†Ô∏è Conclusi√≥n del An√°lisis de Sensibilidad:</strong>
                <p>A√∫n en el mejor escenario (5% de descuento), el proyecto no recupera valor, confirmando que la estructura actual destruye valor para los inversionistas.</p>
            </div>
        </div>

        <!-- Slide 9: KPIs y Conclusiones -->
        <div class="slide question-slide" id="slide-8">
            <h2>
                <div class="question-number">8</div>
                KPIs Finales y Recomendaciones
            </h2>
            
            <div class="content-section">
                <h3>üìä Indicadores Financieros del Proyecto</h3>
                <div class="kpi-grid">
                    <div class="kpi-item">
                        <div>VAN</div>
                        <span class="kpi-value negative">-$164.922</span>
                    </div>
                    <div class="kpi-item">
                        <div>TIR</div>
                        <span class="kpi-value negative">0.14%</span>
                    </div>
                    <div class="kpi-item">
                        <div>Payback</div>
                        <span class="kpi-value">9.97 a√±os</span>
                    </div>
                    <div class="kpi-item">
                        <div>IVAN</div>
                        <span class="kpi-value negative">-82.5%</span>
                    </div>
                </div>
            </div>

            <div class="critical-box">
                <strong>‚ùå Conclusi√≥n Principal:</strong>
                <p>El proyecto <strong>destruye valor</strong> en su forma actual. Todos los indicadores confirman que la inversi√≥n no es viable bajo las condiciones planteadas.</p>
            </div>

            <div class="recommendations">
                <h3>üí° Estrategias de Mejora Propuestas</h3>
                <ul>
                    <li><strong>Reducci√≥n de Escala:</strong> M√°quina m√°s peque√±a o maquila externa para reducir CAPEX inicial</li>
                    <li><strong>Enfoque Retail:</strong> Concentrarse exclusivamente en venta directa donde los m√°rgenes superan el 200%</li>
                    <li><strong>Optimizaci√≥n de Importaciones:</strong> Negociar mejores condiciones de compra y financiamiento</li>
                    <li><strong>Modelo de Franquicias:</strong> Explorar franquicias o maquila para la sucursal, reduciendo CAPEX y costos fijos</li>
                </ul>
            </div>

            <div class="financial-summary">
                <h3>üéØ Reflexi√≥n Final</h3>
                <p>Este an√°lisis demuestra la importancia cr√≠tica de construir flujos de caja precisos y utilizar tasas de descuento apropiadas. La metodolog√≠a aplicada revela claramente que, sin modificaciones estructurales significativas, este proyecto no genera valor para los inversionistas.</p>
            </div>
        </div>
    </div>

    <script>
        // Funcionalidad de navegaci√≥n
        function scrollToSlide(index) {
            const slide = document.getElementById(`slide-${index}`);
            slide.scrollIntoView({ behavior: 'smooth' });
            
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }

        // Detectar scroll para actualizar navegaci√≥n
        window.addEventListener('scroll', () => {
            const slides = document.querySelectorAll('.slide');
            const scrollPosition = window.scrollY + window.innerHeight / 2;
            
            slides.forEach((slide, index) => {
                const slideTop = slide.offsetTop;
                const slideBottom = slideTop + slide.offsetHeight;
                
                if (scrollPosition >= slideTop && scrollPosition < slideBottom) {
                    document.querySelectorAll('.nav-dot').forEach((dot, i) => {
                        dot.classList.toggle('active', i === index);
                    });
                }
            });
        });

        // Animaciones adicionales al hacer scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.data-card, .timeline-item, .kpi-item').forEach(el => {
            observer.observe(el);
        });

        // Navegaci√≥n con teclado
        document.addEventListener('keydown', (e) => {
            const currentActive = document.querySelector('.nav-dot.active');
            const currentIndex = Array.from(document.querySelectorAll('.nav-dot')).indexOf(currentActive);
            
            if (e.key === 'ArrowDown' && currentIndex < 8) {
                scrollToSlide(currentIndex + 1);
            } else if (e.key === 'ArrowUp' && currentIndex > 0) {
                scrollToSlide(currentIndex - 1);
            }
        });

        // Efectos de hover adicionales
        document.querySelectorAll('.data-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-5px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Generar gr√°fico de flujo de caja
        function generateCashFlowChart() {
            // Datos del flujo de caja libre
            const cashFlowData = [
                { year: 0, fcl: -200.000, cumulative: -200.000 },
                { year: 1, fcl: -42.657, cumulative: -242.657 },
                { year: 2, fcl: -86.924, cumulative: -329.581 },
                { year: 3, fcl: -136.510, cumulative: -466.091 },
                { year: 4, fcl: 31.178, cumulative: -434.913 },
                { year: 5, fcl: -25.274, cumulative: -460.187 },
                { year: 6, fcl: 66.258, cumulative: -393.929 },
                { year: 7, fcl: 66.550, cumulative: -327.379 },
                { year: 8, fcl: 73.892, cumulative: -253.487 },
                { year: 9, fcl: 122.804, cumulative: -130.682 },
                { year: 10, fcl: 135.183, cumulative: 4.501 }
            ];

            const chartContainer = document.getElementById('cash-flow-chart');
            const maxAbsValue = Math.max(...cashFlowData.map(d => Math.abs(d.fcl)));

            cashFlowData.forEach((data, index) => {
                const bar = document.createElement('div');
                bar.className = `chart-bar ${data.fcl >= 0 ? 'positive' : 'negative'}`;
                
                const height = Math.abs(data.fcl) / maxAbsValue * 250; // 250px max height
                bar.style.height = `${height}px`;
                
                // Crear etiqueta del a√±o
                const label = document.createElement('div');
                label.className = 'chart-bar-label';
                label.textContent = `A√±o ${data.year}`;
                bar.appendChild(label);
                
                // Crear valor hover
                const value = document.createElement('div');
                value.className = 'chart-value';
                const formattedValue = data.fcl >= 0 ? 
                    `$${data.fcl.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ".")}` : 
                    `-$${Math.abs(data.fcl).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ".")}`;
                value.textContent = formattedValue;
                bar.appendChild(value);
                
                // Animaci√≥n de entrada
                setTimeout(() => {
                    bar.style.opacity = '1';
                    bar.style.transform = 'scaleY(1)';
                }, index * 100);
                
                chartContainer.appendChild(bar);
            });
        }

        // Inicializar el gr√°fico cuando la p√°gina carga
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(generateCashFlowChart, 1000);
            setTimeout(generateCapexDonut, 1200);
            setTimeout(generateCostsStackedChart, 1400);
            setTimeout(generateInteractiveTimeline, 1600);
            initializeProgressBar();
        });

        // Indicador de progreso
        function initializeProgressBar() {
            const progressBar = document.getElementById('progress-bar');
            
            window.addEventListener('scroll', () => {
                const totalHeight = document.documentElement.scrollHeight - window.innerHeight;
                const progress = (window.scrollY / totalHeight) * 100;
                progressBar.style.width = Math.min(progress, 100) + '%';
            });
        }

        // Actualizar breadcrumbs
        function updateBreadcrumbs(activeIndex) {
            const breadcrumbs = document.querySelectorAll('.breadcrumb-item');
            breadcrumbs.forEach((item, index) => {
                item.classList.toggle('active', index === activeIndex);
            });
        }

        // Gr√°fico Donut del CAPEX
        function generateCapexDonut() {
            const capexData = [
                { label: 'Maquinaria', value: 150000, color: '#ef4444' },
                { label: 'Equipamiento', value: 35000, color: '#f97316' },
                { label: 'Instalaci√≥n', value: 15000, color: '#eab308' },
                { label: 'Capital Trabajo', value: 10000, color: '#22c55e' }
            ];

            const total = capexData.reduce((sum, item) => sum + item.value, 0);
            const container = document.getElementById('capex-donut');
            const legendContainer = document.getElementById('capex-legend');

            // Crear SVG
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', '300');
            svg.setAttribute('height', '300');
            svg.setAttribute('viewBox', '0 0 300 300');

            let currentAngle = 0;
            const centerX = 150, centerY = 150, radius = 100, innerRadius = 60;

            capexData.forEach((data, index) => {
                const percentage = (data.value / total) * 100;
                const angle = (data.value / total) * 360;
                
                // Crear segmento del donut
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const startAngle = currentAngle * Math.PI / 180;
                const endAngle = (currentAngle + angle) * Math.PI / 180;

                const x1 = centerX + Math.cos(startAngle) * radius;
                const y1 = centerY + Math.sin(startAngle) * radius;
                const x2 = centerX + Math.cos(endAngle) * radius;
                const y2 = centerY + Math.sin(endAngle) * radius;
                const x3 = centerX + Math.cos(endAngle) * innerRadius;
                const y3 = centerY + Math.sin(endAngle) * innerRadius;
                const x4 = centerX + Math.cos(startAngle) * innerRadius;
                const y4 = centerY + Math.sin(startAngle) * innerRadius;

                const largeArc = angle > 180 ? 1 : 0;

                const pathData = [
                    `M ${x1} ${y1}`,
                    `A ${radius} ${radius} 0 ${largeArc} 1 ${x2} ${y2}`,
                    `L ${x3} ${y3}`,
                    `A ${innerRadius} ${innerRadius} 0 ${largeArc} 0 ${x4} ${y4}`,
                    'Z'
                ].join(' ');

                path.setAttribute('d', pathData);
                path.setAttribute('fill', data.color);
                path.setAttribute('class', 'donut-segment');
                path.setAttribute('stroke', '#1e293b');
                path.setAttribute('stroke-width', '2');

                // Tooltip
                path.addEventListener('mouseenter', () => {
                    path.style.filter = 'brightness(1.2)';
                });
                path.addEventListener('mouseleave', () => {
                    path.style.filter = 'brightness(1)';
                });

                svg.appendChild(path);
                currentAngle += angle;

                // Crear elemento de leyenda
                const legendItem = document.createElement('div');
                legendItem.className = 'donut-legend-item';
                legendItem.innerHTML = `
                    <div class="donut-legend-color" style="background: ${data.color}"></div>
                    <div>
                        <strong>${data.label}</strong><br>
                        <span>$${data.value.toLocaleString()} (${percentage.toFixed(1)}%)</span>
                    </div>
                `;
                legendContainer.appendChild(legendItem);
            });

            // A√±adir texto central
            const centerText = document.createElement('div');
            centerText.className = 'donut-center';
            centerText.innerHTML = `
                <div class="donut-total">$${total.toLocaleString()}</div>
                <div class="donut-label">CAPEX Total</div>
            `;

            container.appendChild(svg);
            container.appendChild(centerText);
        }

        // Gr√°fico de barras apiladas de costos
        function generateCostsStackedChart() {
            const costsData = [
                { year: 1, varCosts: 88630, imports: 0, freight: 45529, fixed: 86800, badDebt: 2018 },
                { year: 2, varCosts: 89428, imports: 0, freight: 44889, fixed: 86800, badDebt: 2009 },
                { year: 3, varCosts: 90233, imports: 0, freight: 44289, fixed: 86800, badDebt: 1999 },
                { year: 4, varCosts: 91045, imports: 20517, freight: 48760, fixed: 155600, badDebt: 3079 },
                { year: 5, varCosts: 91865, imports: 21230, freight: 48307, fixed: 155600, badDebt: 3110 },
                { year: 6, varCosts: 92691, imports: 49019, freight: 37858, fixed: 222400, badDebt: 3413 },
                { year: 7, varCosts: 93526, imports: 50723, freight: 37031, fixed: 222400, badDebt: 3457 },
                { year: 8, varCosts: 94367, imports: 52485, freight: 36262, fixed: 222400, badDebt: 3502 },
                { year: 9, varCosts: 95217, imports: 54309, freight: 35369, fixed: 222400, badDebt: 3549 },
                { year: 10, varCosts: 96074, imports: 56197, freight: 34600, fixed: 222400, badDebt: 3597 }
            ];

            const container = document.getElementById('costs-stacked-chart');
            const colors = ['#ef4444', '#f97316', '#eab308', '#22c55e', '#3b82f6'];
            const maxTotal = Math.max(...costsData.map(d => 
                d.varCosts + d.imports + d.freight + d.fixed + d.badDebt
            ));

            costsData.forEach((data, index) => {
                const barContainer = document.createElement('div');
                barContainer.className = 'stacked-bar';

                const values = [data.varCosts, data.imports, data.freight, data.fixed, data.badDebt];
                const total = values.reduce((sum, val) => sum + val, 0);

                values.forEach((value, segIndex) => {
                    if (value > 0) {
                        const segment = document.createElement('div');
                        segment.className = 'stacked-segment';
                        const height = (value / maxTotal) * 300;
                        segment.style.height = `${height}px`;
                        segment.style.backgroundColor = colors[segIndex];
                        segment.title = `$${value.toLocaleString()}`;
                        barContainer.appendChild(segment);
                    }
                });

                const label = document.createElement('div');
                label.className = 'stacked-year-label';
                label.textContent = `A√±o ${data.year}`;
                barContainer.appendChild(label);

                container.appendChild(barContainer);

                // Animaci√≥n de entrada
                setTimeout(() => {
                    barContainer.style.opacity = '1';
                    barContainer.style.transform = 'scaleY(1)';
                }, index * 100);
            });
        }

        // Timeline interactiva
        function generateInteractiveTimeline() {
            const timelineEvents = [
                { year: 0, event: 'Inversi√≥n Inicial', detail: 'CAPEX $210.000' },
                { year: 1, event: 'Inicio Operaciones', detail: 'Ventas mayoristas' },
                { year: 3, event: 'Pr√©stamo 2', detail: 'GBP 30.000' },
                { year: 4, event: 'Tienda Principal', detail: 'Apertura retail' },
                { year: 6, event: 'Sucursal', detail: 'Segunda tienda' },
                { year: 10, event: 'Fin Proyecto', detail: 'VAN final' }
            ];

            const container = document.getElementById('timeline-markers');
            const progress = document.getElementById('timeline-progress');

            timelineEvents.forEach((event, index) => {
                const marker = document.createElement('div');
                marker.className = 'timeline-marker';
                
                const info = document.createElement('div');
                info.className = 'timeline-marker-info';
                info.innerHTML = `<strong>A√±o ${event.year}</strong><br>${event.event}<br>${event.detail}`;
                marker.appendChild(info);

                marker.addEventListener('click', () => {
                    // Quitar active de todos
                    document.querySelectorAll('.timeline-marker').forEach(m => m.classList.remove('active'));
                    marker.classList.add('active');
                    
                    // Actualizar progreso
                    const progressPercent = (index / (timelineEvents.length - 1)) * 100;
                    progress.style.width = `${progressPercent}%`;
                });

                container.appendChild(marker);
            });

            // Activar el primer marcador y animar el progreso
            setTimeout(() => {
                container.children[0].classList.add('active');
                progress.style.width = '100%';
            }, 500);
        }

        // Modo pantalla completa
        function toggleFullscreen() {
            const icon = document.getElementById('fullscreen-icon');
            
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    icon.textContent = '‚õ∂';
                }).catch(err => {
                    console.log('Error al entrar en pantalla completa:', err);
                });
            } else {
                document.exitFullscreen().then(() => {
                    icon.textContent = '‚õ∂';
                }).catch(err => {
                    console.log('Error al salir de pantalla completa:', err);
                });
            }
        }

        // Actualizar funci√≥n de navegaci√≥n existente
        const originalScrollToSlide = scrollToSlide;
        scrollToSlide = function(index) {
            originalScrollToSlide(index);
            updateBreadcrumbs(index);
            
            // A√±adir animaciones
            const slide = document.getElementById(`slide-${index}`);
            slide.classList.add('animate-slide-left');
            setTimeout(() => slide.classList.remove('animate-slide-left'), 800);
        };

        // Mejorar detecci√≥n de scroll existente
        window.addEventListener('scroll', () => {
            const slides = document.querySelectorAll('.slide');
            const scrollPosition = window.scrollY + window.innerHeight / 2;
            
            slides.forEach((slide, index) => {
                const slideTop = slide.offsetTop;
                const slideBottom = slideTop + slide.offsetHeight;
                
                if (scrollPosition >= slideTop && scrollPosition < slideBottom) {
                    document.querySelectorAll('.nav-dot').forEach((dot, i) => {
                        dot.classList.toggle('active', i === index);
                    });
                    updateBreadcrumbs(index);
                }
            });
        });

        // A√±adir efectos hover mejorados a elementos existentes
        document.addEventListener('DOMContentLoaded', () => {
            // Aplicar enhanced-hover a data-cards
            document.querySelectorAll('.data-card').forEach(card => {
                card.classList.add('enhanced-hover');
            });
            
            // Aplicar animaciones pulse a elementos importantes
            document.querySelectorAll('.kpi-value.negative').forEach(el => {
                el.classList.add('animate-pulse');
            });
        });

        // Atajos de teclado mejorados
        document.addEventListener('keydown', (e) => {
            const currentActive = document.querySelector('.nav-dot.active');
            const currentIndex = Array.from(document.querySelectorAll('.nav-dot')).indexOf(currentActive);
            
            switch(e.key) {
                case 'ArrowDown':
                case ' ':
                    e.preventDefault();
                    if (currentIndex < 8) scrollToSlide(currentIndex + 1);
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    if (currentIndex > 0) scrollToSlide(currentIndex - 1);
                    break;
                case 'Home':
                    e.preventDefault();
                    scrollToSlide(0);
                    break;
                case 'End':
                    e.preventDefault();
                    scrollToSlide(8);
                    break;
                case 'f':
                case 'F':
                    if (!e.ctrlKey) {
                        e.preventDefault();
                        toggleFullscreen();
                    }
                    break;
            }
        });
    </script>
</body>
</html>
